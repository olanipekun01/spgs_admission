<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SPA Registration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="registration.js"></script>
  </head>
  <body class="min-h-screen bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <h1 class="text-2xl font-bold text-gray-900">SPA</h1>
          </div>
          <div class="ml-4">
            <h2 class="text-lg font-medium text-gray-700">School of Postgraduate Achievers</h2>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-center">
          <!-- Registration Form -->
          <div class="order-2 lg:order-1">
            <div class="max-w-md mx-auto lg:mx-0">
              <div class="mb-8">
                <h1 class="text-3xl font-bold text-gray-900 mb-2">Join Our Community</h1>
                <p class="text-gray-600">
                  Create your account to access exclusive postgraduate resources and connect with fellow achievers.
                </p>
              </div>
              
              {% for message in messages %}
                  <h5 style="color: red">{{message}}</h5>
              {% endfor %}
              <div id="registration-form"></div>
              <div class="mt-6 text-center">
                <p class="text-sm text-gray-600">
                  Already have an account?
                  <a href="/accounts/login/" class="font-medium text-[#722F37] hover:text-[#5a252a] transition-colors">
                    Sign in here
                  </a>
                </p>
              </div>
            </div>
          </div>

          <!-- Hero Content -->
          <div class="order-1 lg:order-2">
            <div class="relative">
              <div class="bg-gradient-to-br from-[#722F37] to-[#5a252a] rounded-2xl p-8 lg:p-12 text-white">
                <div class="relative z-10">
                  <h2 class="text-2xl lg:text-3xl font-bold mb-4">Elevate Your Academic Journey</h2>
                  <p class="text-lg mb-6 text-gray-100">
                    Access cutting-edge research tools, connect with industry experts, and accelerate your postgraduate success.
                  </p>
                  <div class="space-y-3">
                    <div class="flex items-center">
                      <div class="w-2 h-2 bg-white rounded-full mr-3"></div>
                      <span>Exclusive research databases</span>
                    </div>
                    <div class="flex items-center">
                      <div class="w-2 h-2 bg-white rounded-full mr-3"></div>
                      <span>Mentorship programs</span>
                    </div>
                    <div class="flex items-center">
                      <div class="w-2 h-2 bg-white rounded-full mr-3"></div>
                      <span>Career development resources</span>
                    </div>
                    <div class="flex items-center">
                      <div class="w-2 h-2 bg-white rounded-full mr-3"></div>
                      <span>Global networking opportunities</span>
                    </div>
                  </div>
                </div>
                <div class="absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -translate-y-16 translate-x-16"></div>
                <div class="absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full translate-y-12 -translate-x-12"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <div class="text-center text-sm text-gray-500">
          <p>&copy; 2024 School of Postgraduate Achievers. All rights reserved.</p>
        </div>
      </div>
    </footer>
  </body>

  <script>

    document.addEventListener("DOMContentLoaded", function () {
  const formContainer = document.getElementById("registration-form");
  
  formContainer.innerHTML = `
    <form method="post"  id="registerForm" class="space-y-4">
      {% csrf_token %}
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div class="space-y-2">
          <label for="firstName" class="text-sm font-medium text-gray-700">First Name</label>
          <input type="text" id="firstName" name="firstName" class="pl-4 py-2 border border-gray-300 rounded w-full" placeholder="Enter first name" />
          <p class="text-sm text-red-600" id="error-firstName"></p>
        </div>
        <div class="space-y-2">
          <label for="lastName" class="text-sm font-medium text-gray-700">Last Name</label>
          <input type="text" id="lastName" name="lastName" class="pl-4 py-2 border border-gray-300 rounded w-full" placeholder="Enter last name" />
          <p class="text-sm text-red-600" id="error-lastName"></p>
        </div>
      </div>
      <div class="space-y-2">
        <label for="email" class="text-sm font-medium text-gray-700">Email Address</label>
        <input type="email" id="email" name="email" class="pl-4 py-2 border border-gray-300 rounded w-full" placeholder="Enter your email" />
        <p class="text-sm text-red-600" id="error-email"></p>
      </div>
      <div class="space-y-2">
        <label for="password" class="text-sm font-medium text-gray-700">Password</label>
        <input type="password" id="password" name="password" class="pl-4 py-2 border border-gray-300 rounded w-full" placeholder="Create a password" />
        <p class="text-sm text-red-600" id="error-password"></p>
      </div>
      <div class="space-y-2">
        <label for="confirmPassword" class="text-sm font-medium text-gray-700">Confirm Password</label>
        <input type="password" id="confirmPassword" name="confirmPassword" class="pl-4 py-2 border border-gray-300 rounded w-full" placeholder="Confirm your password" />
        <p class="text-sm text-red-600" id="error-confirmPassword"></p>
      </div>
      <button type="submit" class="w-full bg-[#722F37] hover:bg-[#5a252a] text-white font-medium py-2.5 rounded">
        Create Account
      </button>
      <p class="text-xs text-gray-500 text-center mt-4">
        By creating an account, you agree to our 
        <a href="/terms" class="text-[#722F37] hover:underline">Terms of Service</a> and 
        <a href="/privacy" class="text-[#722F37] hover:underline">Privacy Policy</a>.
      </p>
    </form>
  `;

  const form = document.getElementById("registerForm");

  form.addEventListener("submit", function (e) {
    e.preventDefault();
    const firstName = form.firstName.value.trim();
    const lastName = form.lastName.value.trim();
    const email = form.email.value.trim();
    const password = form.password.value;
    const confirmPassword = form.confirmPassword.value;

    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    let valid = true;

    // Reset errors
    ["firstName", "lastName", "email", "password", "confirmPassword"].forEach(field => {
      document.getElementById(`error-${field}`).textContent = "";
    });

    if (!firstName || firstName.length < 2) {
      document.getElementById("error-firstName").textContent = "First name must be at least 2 characters.";
      valid = false;
    }

    if (!lastName || lastName.length < 2) {
      document.getElementById("error-lastName").textContent = "Last name must be at least 2 characters.";
      valid = false;
    }

    if (!email || !emailRegex.test(email)) {
      document.getElementById("error-email").textContent = "Please enter a valid email address.";
      valid = false;
    }

    if (!password || password.length < 8 || !/(?=.*[a-zA-Z])(?=.*\d)/.test(password)) {
      document.getElementById("error-password").textContent = "Password must be at least 8 characters and include a number.";
      valid = false;
    }

    if (password !== confirmPassword) {
      document.getElementById("error-confirmPassword").textContent = "Passwords do not match.";
      valid = false;
    }

    if (valid) {
      form.submit();
    }
  });
});

  </script>
</html>
